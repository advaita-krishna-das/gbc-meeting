{% macro view() %}
<script id="stage-template" type="text/x-handlebars-template">
    {% raw %}
    {{> (stageType) }}
    {% endraw %}
</script>

<script id="stage-proposal-template" type="text/x-handlebars-template">
    {% raw %}
    {{#if id}}
    <div class="panel panel-default">
        <div class="panel-heading">Proposal</div>
        <div class="panel-body" id="proposal-content">
            <h1>{{ title }}</h1>
            <p>{{{ content }}}</p>
        </div>
    </div>
    {{/if}}
    {% endraw %}
</script>

{% set widgets = [
    "stages/acquaintance",
    "stages/agenda",
    "stages/closed",
    "stages/commenting",
    "stages/discussion",
    "stages/voting",
    "stages/voting_results",
    "widgets/comments",
    "widgets/voting_results"
] %}



{% for widget in widgets %}
    <script id="widget-{{widget}}" type="text/x-handlebars-template" class="template" data-name="{{widget}}">
        {% include "views/" + widget + ".html" %}
    </script>
{% endfor %}


<script id="session-users-line" type="text/x-handlebars-template">
    {%raw%}
    <li>
        {{name}} <small>{{role}}</small> {{user}}
        {{#ifHas @user.permissions "session.manage"}}
        <a href='#'>
            <span class='glyphicon glyphicon-remove kick' data-user-id='{{id}}'></span>
        </a>
        {{/ifHas}}
    </li>
    {%endraw%}
</script>

{% endmacro %}