{% macro form(model, action='', allow_edit=true) -%}
    {% if allow_edit %}
        <form action="{{ action }}" method="post" class="form-horizontal">
            <!-- Key -->
            <div class="form-group">
                <label for="key" class="col-sm-2 control-label">Key</label>
                <div class="col-sm-10">
                    <input id="key"
                           name="key"
                           class="form-control input-lg"
                           placeholder="Unique key"
                           value="{{ model.key }}"
                           autocomplete="off">
                </div>
            </div>

            <!-- Title -->
            <div class="form-group">
                <label for="title" class="col-sm-2 control-label">Title</label>
                <div class="col-sm-10">
                    <input id="title"
                           name="title"
                           class="form-control input-lg"
                           placeholder="Title"
                           value="{{ model.title }}"
                           autocomplete="off">
                </div>
            </div>

            <!-- State -->
            <div class="form-group">
                <label for="title" class="col-sm-2 control-label">State</label>
                <div class="col-sm-10">
                    <select name="state" class="selectpicker form-control" title="Choose a sate" {%if not allow_edit%}disabled{%endif%}>
                        <option {%if model.state =='new'%}selected{%endif%} value="new">New</option>
                        <option {%if model.state =='deputies_review'%}selected{%endif%} value="deputies_review">Deputies Review</option>
                        <option {%if model.state =='straw_vote'%}selected{%endif%} value="straw_vote">Straw Vote</option>
                        <option {%if model.state =='deputies_straw_vote_review'%}selected{%endif%} value="deputies_straw_vote_review">Deputies Straw Vote Review</option>
                        <option {%if model.state =='final_vote'%}selected{%endif%} value="final_vote">Final Vote</option>
                        <option {%if model.state =='done'%}selected{%endif%} value="done">Done</option>
                    </select>
                </div>
            </div>

            <!-- Content -->
            <div class="form-group">
                <label for="content" class="col-sm-2 control-label">Content</label>
                <div class="col-sm-10">
                    <textarea id="content"
                              name="content"
                              class="form-control"
                              rows="20"
                              placeholder="Paste or write content here">
                        {{- model.content -}}
                    </textarea>
                </div>
            </div>

            <!-- Submit -->
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <input id="submit"
                           type="submit"
                           class="form-control btn btn-primary">
                </div>
            </div>
        </form>
    {% else %}
        <h1>{{model.title}}</h1>
        <p>{{model.content}}</p>
    {% endif %}
{%- endmacro %}