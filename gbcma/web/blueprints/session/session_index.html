{% extends "general.html" %}

{% block body %}
{% import "session_view.html" as v %}

<script src="/static/session_controller.js"></script>
<script src="/static/session_user_controller.js"></script>

{{ v.view() }}

<script id="session-key" type="text">
{{session._id}}
</script>

<script id="stage-template" type="text/x-handlebars-template">
{% raw %}
    {{# if proposal }}
        <div class="panel panel-default">
            <div class="panel-heading">Current proposal ({{progress.current}}/{{progress.total}})</div>
            <div class="panel-body">
                <h1>
                    {{ proposal.title }}
                </h1>
                <p>{{ proposal.content }}</p>
            </div>

        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Straw vote</div>
            <div class="panel-body">
                <a href="#" class="btn btn-success vote" data-vote="true">
                    <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Yes
                </a>
                <a href="#" class="btn btn-danger vote" data-vote="false">
                    <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span> No
                </a>
                <a href="#" class="btn btn-warning vote" data-vote="null">
                    <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Abstained
                </a>
            </div>
        </div>
    {{/if}}

    {{# if closed }}
        <div class="panel panel-default">
            <div class="panel-heading">Session is about to end</div>
            <div class="panel-body">
                <h1>All proposals have been reviewed.</h1>
            </div>
        </div>
    {{/if}}
{% endraw %}
</script>
{% endblock %}
